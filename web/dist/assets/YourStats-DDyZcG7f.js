import{u as M,a as B,c as F,r as o,v as D,o as E,n as _,j as e}from"./index-Ccj2qmzZ.js";function W(){const d=M(),{t:s}=B(),{user:a}=F(),[x,b]=o.useState([]),[N,v]=o.useState(null),[w,S]=o.useState(!0);o.useEffect(()=>{k()},[]);const k=async()=>{try{await D()}catch{}b(E()),v(_()),S(!1)},c=N||{total:0,verified:0,correct:0,wrong:0,pending:0,accuracy:0,currentStreak:0,longestStreak:0,streakType:null},C=x.filter(r=>r.result).sort((r,t)=>new Date(t.verifiedAt)-new Date(r.verifiedAt)),f=c.currentStreak,j=c.streakType,p=c.longestStreak,l={};for(const r of x){const t=r.league||s("yourStats.unknown");l[t]||(l[t]={total:0,correct:0,wrong:0,pending:0}),l[t].total++,r.result?r.result.isCorrect?l[t].correct++:l[t].wrong++:l[t].pending++}const g=Object.entries(l).sort((r,t)=>t[1].total-r[1].total).slice(0,10),L={high:s("yourStats.confidenceHigh"),medium:s("yourStats.confidenceMedium"),low:s("yourStats.confidenceLow")},m={high:{total:0,correct:0},medium:{total:0,correct:0},low:{total:0,correct:0}};for(const r of x.filter(t=>t.result)){const t=r.prediction.confidence,n=t>=70?"high":t>=50?"medium":"low";m[n].total++,r.result.isCorrect&&m[n].correct++}const h=C.slice(0,10),u=54,y=2*Math.PI*u,$=c.accuracy/100*y;return w?e.jsx("div",{className:"h-screen flex flex-col bg-[#F0F2F5]",children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[e.jsx("div",{className:"bg-white px-5 pt-4 pb-4",children:e.jsx("div",{className:"shimmer h-6 w-40 mb-4"})}),e.jsxs("div",{className:"px-5 mt-4 space-y-4",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"shimmer h-40 w-full"})}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"shimmer h-32 w-full"})})]})]})}):e.jsx("div",{className:"h-screen flex flex-col bg-[#F0F2F5]",children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[e.jsx("div",{className:"bg-white px-5 pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>d(-1),className:"w-10 h-10 flex items-center justify-center -ml-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("h1",{className:"text-lg font-bold",children:s("yourStats.title")})]})}),e.jsx("div",{className:"px-5 mt-4 space-y-4 pb-8",children:c.total===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s("yourStats.noStatsYet")}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:s("yourStats.noStatsDesc")}),e.jsx("button",{onClick:()=>d("/matches"),className:"btn-primary inline-flex items-center gap-2",children:s("yourStats.browseMatches")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative w-28 h-28 shrink-0",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:u,fill:"none",stroke:"#E5E7EB",strokeWidth:"7"}),c.verified>0&&e.jsx("circle",{cx:"60",cy:"60",r:u,fill:"none",stroke:c.accuracy>=50?"#22C55E":"#EF4444",strokeWidth:"7",strokeDasharray:y,strokeDashoffset:y-$,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:`text-2xl font-bold ${c.accuracy>=50?"text-green-500":c.verified>0?"text-red-500":"text-gray-400"}`,children:c.verified>0?`${c.accuracy}%`:"--"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:s("yourStats.accuracy")})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:s("yourStats.totalPredictions")}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:c.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:s("yourStats.correct")}),e.jsx("span",{className:"text-sm font-bold text-green-500",children:c.correct})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:s("yourStats.wrong")}),e.jsx("span",{className:"text-sm font-bold text-red-500",children:c.wrong})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:s("yourStats.pending")}),e.jsx("span",{className:"text-sm font-bold text-amber-500",children:c.pending})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"card border border-gray-100 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:s("yourStats.currentStreak")}),e.jsx("p",{className:`text-2xl font-bold ${j?"text-green-500":"text-red-500"}`,children:f>0?`${f}${s(j?"yourStats.win":"yourStats.loss")}`:"-"})]}),e.jsxs("div",{className:"card border border-gray-100 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase mb-1",children:s("yourStats.bestWinStreak")}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:p>0?`${p}${s("yourStats.win")}`:"-"})]})]}),h.length>0&&e.jsxs("div",{className:"card border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-3",children:s("yourStats.recentForm",{count:h.length})}),e.jsx("div",{className:"flex gap-1.5 justify-center flex-wrap",children:h.map((r,t)=>e.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-white text-xs font-bold ${r.result.isCorrect?"bg-green-500":"bg-red-500"}`,children:r.result.isCorrect?s("yourStats.win"):s("yourStats.loss")},t))})]}),c.verified>0&&e.jsxs("div",{className:"card border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-3",children:s("yourStats.accuracyByConfidence")}),e.jsx("div",{className:"space-y-3",children:Object.entries(m).map(([r,t])=>{const n=L[r],i=t.total>0?Math.round(t.correct/t.total*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:n}),e.jsx("span",{className:"font-semibold",children:t.total>0?`${i}% (${t.correct}/${t.total})`:s("yourStats.na")})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:t.total>0&&e.jsx("div",{className:`h-full rounded-full ${i>=50?"bg-green-500":"bg-red-400"}`,style:{width:`${i}%`}})})]},r)})})]}),g.length>0&&e.jsxs("div",{className:"card border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-3",children:s("yourStats.byLeague")}),e.jsx("div",{className:"space-y-2",children:g.map(([r,t])=>{const n=t.correct+t.wrong,i=n>0?Math.round(t.correct/n*100):null;return e.jsxs("div",{className:"flex items-center justify-between py-1.5 border-b border-gray-50 last:border-0",children:[e.jsx("span",{className:"text-sm text-gray-700 truncate flex-1 mr-3",children:r}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-400",children:s("yourStats.predCount",{count:t.total})}),i!==null?e.jsxs("span",{className:`text-sm font-bold min-w-[40px] text-right ${i>=50?"text-green-500":"text-red-500"}`,children:[i,"%"]}):e.jsx("span",{className:"text-sm text-amber-500 font-medium min-w-[40px] text-right",children:"..."})]})]},r)})})]}),e.jsxs("div",{className:"card border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-semibold mb-3",children:s("yourStats.account")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:s("yourStats.plan")}),e.jsx("span",{className:`font-semibold ${a!=null&&a.is_premium?"text-amber-500":"text-gray-900"}`,children:a!=null&&a.is_premium?s("yourStats.premium"):s("yourStats.free")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:s("yourStats.dailyAiRequests")}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[(a==null?void 0:a.daily_requests)||0," / ",(a==null?void 0:a.daily_limit)||10]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:s("yourStats.riskLevel")}),e.jsx("span",{className:"font-semibold text-gray-900 capitalize",children:(a==null?void 0:a.risk_level)||"medium"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:s("yourStats.memberSince")}),e.jsx("span",{className:"font-semibold text-gray-900",children:a!=null&&a.created_at?new Date(a.created_at).toLocaleDateString("en-GB",{month:"short",year:"numeric"}):"-"})]})]})]}),e.jsxs("button",{onClick:()=>d("/prediction-history"),className:"card border border-primary-200 bg-primary-50 flex items-center gap-3 w-full text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-primary-700",children:s("yourStats.viewPredictionHistory")}),e.jsx("p",{className:"text-xs text-primary-500",children:s("yourStats.viewPredictionHistoryDesc")})]}),e.jsx("svg",{className:"w-5 h-5 text-primary-400 shrink-0",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})})]})})}export{W as default};
