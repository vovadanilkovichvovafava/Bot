import{u as L,a as $,c as B,r as d,v,o as w,n as k,j as e}from"./index-BHJ97n9P.js";function D(){const t=L(),{t:r}=$(),{user:c}=B(),[a,n]=d.useState([]),[i,m]=d.useState({total:0,verified:0,correct:0,wrong:0,pending:0,accuracy:0}),[u,h]=d.useState(!0),[x,l]=d.useState(!1),[o,p]=d.useState("all");d.useEffect(()=>{H()},[]);const H=async()=>{h(!0);try{l(!0),await v(),l(!1)}catch(s){console.error("Verification error:",s),l(!1)}n(w()),m(k()),h(!1)},C=async()=>{l(!0);try{const s=await v();n(w()),m(k()),s>0}catch(s){console.error(s)}finally{l(!1)}},y=o==="all"?a:o==="correct"?a.filter(s=>{var N;return(N=s.result)==null?void 0:N.isCorrect}):o==="wrong"?a.filter(s=>s.result&&!s.result.isCorrect):a.filter(s=>!s.result),j=54,f=2*Math.PI*j,S=i.accuracy/100*f;return e.jsx("div",{className:"h-screen flex flex-col bg-[#F0F2F5]",children:e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[e.jsxs("div",{className:"bg-white px-5 pt-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 flex items-center justify-center -ml-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:r("predictionHistory.title")}),e.jsx("button",{onClick:C,disabled:x,className:"w-10 h-10 flex items-center justify-center -mr-2",children:e.jsx("svg",{className:`w-5 h-5 text-gray-600 ${x?"animate-spin":""}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182"})})})]}),i.total>0&&e.jsx("div",{className:"card border border-gray-100 mb-4",children:e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative w-28 h-28 shrink-0",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:j,fill:"none",stroke:"#E5E7EB",strokeWidth:"7"}),i.verified>0&&e.jsx("circle",{cx:"60",cy:"60",r:j,fill:"none",stroke:i.accuracy>=50?"#22C55E":"#EF4444",strokeWidth:"7",strokeDasharray:f,strokeDashoffset:f-S,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:`text-2xl font-bold ${i.accuracy>=50?"text-green-500":i.verified>0?"text-red-500":"text-gray-400"}`,children:i.verified>0?`${i.accuracy}%`:"--"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:r("predictionHistory.accuracy")})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[e.jsx(g,{label:r("predictionHistory.total"),value:i.total,color:"text-primary-600",bg:"bg-primary-50"}),e.jsx(g,{label:r("predictionHistory.correct"),value:i.correct,color:"text-green-600",bg:"bg-green-50"}),e.jsx(g,{label:r("predictionHistory.wrong"),value:i.wrong,color:"text-red-500",bg:"bg-red-50"}),e.jsx(g,{label:r("predictionHistory.pending"),value:i.pending,color:"text-amber-500",bg:"bg-amber-50"})]})]})}),e.jsx("div",{className:"flex gap-2",children:[{key:"all",label:r("predictionHistory.all"),count:a.length},{key:"correct",label:r("predictionHistory.correct"),count:i.correct},{key:"wrong",label:r("predictionHistory.wrong"),count:i.wrong},{key:"pending",label:r("predictionHistory.pending"),count:i.pending}].map(s=>e.jsxs("button",{onClick:()=>p(s.key),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5 ${o===s.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-600"}`,children:[s.label,s.count>0&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center ${o===s.key?"bg-white/20":"bg-gray-200"}`,children:s.count})]},s.key))})]}),e.jsx("div",{className:"px-5 mt-4 space-y-3 pb-8",children:u?e.jsxs(e.Fragment,{children:[[1,2,3,4].map(s=>e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"shimmer h-5 w-40 mb-3"}),e.jsx("div",{className:"shimmer h-4 w-full mb-2"}),e.jsx("div",{className:"shimmer h-10 w-full rounded-xl"})]},s)),x&&e.jsx("p",{className:"text-center text-gray-400 text-sm mt-2",children:r("predictionHistory.checkingResults")})]}):y.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.length===0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:r("predictionHistory.noPredictionsYet")}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:r("predictionHistory.noPredictionsDesc")}),e.jsxs("button",{onClick:()=>t("/matches"),className:"btn-primary inline-flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),r("predictionHistory.browseMatches")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:r("predictionHistory.noFilteredPredictions",{filter:o})}),e.jsx("p",{className:"text-gray-500 text-sm",children:r("predictionHistory.tryChangingFilter")})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-400",children:r("predictionHistory.predictionCount",{count:y.length})}),y.map(s=>e.jsx(P,{pred:s,navigate:t,t:r},s.id))]})})]})})}function P({pred:t,navigate:r,t:c}){const a=t.result,n=!!a,i=a==null?void 0:a.isCorrect,m=n?i?"border-green-200":"border-red-200":"border-amber-200",u=n?i?"bg-green-50":"bg-red-50":"bg-amber-50",h=n?i?"text-green-600":"text-red-600":"text-amber-600",x=n?i?e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),l=new Date(t.matchDate),o=l.toLocaleDateString("en-GB",{day:"2-digit",month:"short"}),p=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return new Date(t.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),e.jsxs("div",{className:`card border ${m} cursor-pointer`,onClick:()=>r(`/match/${t.matchId}`),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase",children:t.league}),e.jsxs("span",{className:"text-xs text-gray-500",children:[o," ",p]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.homeTeam.logo&&e.jsx("img",{src:t.homeTeam.logo,alt:"",className:"w-5 h-5 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.homeTeam.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.awayTeam.logo&&e.jsx("img",{src:t.awayTeam.logo,alt:"",className:"w-5 h-5 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:t.awayTeam.name})]})]}),n&&e.jsxs("div",{className:"text-center shrink-0",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[a.homeGoals," - ",a.awayGoals]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:a.status})]}),e.jsx("div",{className:"shrink-0",children:x})]}),e.jsxs("div",{className:`rounded-xl p-3 ${u}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase",children:c("predictionHistory.prediction")}),e.jsx("p",{className:`font-bold text-sm ${h}`,children:t.prediction.winnerName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:c("predictionHistory.confidence")}),e.jsxs("p",{className:"font-bold text-sm text-gray-900",children:[t.prediction.confidence,"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(b,{label:c("predictionHistory.homeShort"),pct:t.prediction.homePct,highlight:t.prediction.winnerName===t.homeTeam.name}),e.jsx(b,{label:c("predictionHistory.drawShort"),pct:t.prediction.drawPct,highlight:t.prediction.winnerName==="Draw"}),e.jsx(b,{label:c("predictionHistory.awayShort"),pct:t.prediction.awayPct,highlight:t.prediction.winnerName===t.awayTeam.name})]}),n&&e.jsx("div",{className:`mt-2 pt-2 border-t ${i?"border-green-200":"border-red-200"}`,children:e.jsx("p",{className:`text-xs font-semibold ${i?"text-green-600":"text-red-600"}`,children:i?c("predictionHistory.correctPrediction"):c("predictionHistory.result",{result:a.actualResult})})})]}),t.prediction.advice&&e.jsx("p",{className:"text-xs text-gray-400 mt-2 truncate",children:t.prediction.advice})]})}function b({label:t,pct:r,highlight:c}){return e.jsxs("div",{className:`flex-1 rounded-lg py-1 px-2 text-center ${c?"bg-white shadow-sm":""}`,children:[e.jsx("p",{className:"text-[10px] text-gray-400",children:t}),e.jsxs("p",{className:`text-xs font-bold ${c?"text-primary-600":"text-gray-600"}`,children:[r,"%"]})]})}function g({label:t,value:r,color:c,bg:a}){return e.jsxs("div",{className:`${a} rounded-xl py-2 px-3 text-center`,children:[e.jsx("p",{className:`text-lg font-bold ${c}`,children:r}),e.jsx("p",{className:"text-[10px] text-gray-500",children:t})]})}export{D as default};
