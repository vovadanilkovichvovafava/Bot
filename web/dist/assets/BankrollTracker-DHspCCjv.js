import{u as J,a as P,c as Y,r as a,j as e}from"./index-BHJ97n9P.js";const C="bankroll_data",f=()=>({startingBankroll:0,currentBankroll:0,currency:"USD",transactions:[],createdAt:new Date().toISOString()}),K=()=>{try{const o=localStorage.getItem(C);return o?JSON.parse(o):f()}catch{return f()}},U=o=>{localStorage.setItem(C,JSON.stringify(o))};function Q(){const o=J(),{t:s}=P(),{user:q}=Y(),[l,c]=a.useState(K),[F,u]=a.useState(!1),[i,L]=a.useState("deposit"),[d,j]=a.useState(""),[N,w]=a.useState(""),[$,b]=a.useState(!1),[x,k]=a.useState("");a.useEffect(()=>{U(l)},[l]),a.useEffect(()=>{l.startingBankroll===0&&l.transactions.length===0&&b(!0)},[]);const D=()=>{const t=parseFloat(x)||0;t<=0||(c({...l,startingBankroll:t,currentBankroll:t,transactions:[{id:Date.now(),type:"deposit",amount:t,date:new Date().toISOString(),note:s("bankroll.initialBankroll")}]}),b(!1),k(""))},_=()=>{const t=parseFloat(d)||0;if(t<=0)return;const n={id:Date.now(),type:i,amount:t,date:new Date().toISOString(),note:N||y(i)};let r=l.currentBankroll;i==="deposit"||i==="bet_win"?r+=t:r-=t,c({...l,currentBankroll:Math.max(0,r),transactions:[n,...l.transactions]}),u(!1),j(""),w("")},y=t=>({deposit:s("bankroll.deposit"),withdraw:s("bankroll.withdrawal"),bet_win:s("bankroll.betWon"),bet_loss:s("bankroll.betLost")})[t]||"",A=t=>{const n=l.transactions.find(p=>p.id===t);if(!n)return;let r=l.currentBankroll;n.type==="deposit"||n.type==="bet_win"?r-=n.amount:r+=n.amount,c({...l,currentBankroll:Math.max(0,r),transactions:l.transactions.filter(p=>p.id!==t)})},T=()=>{confirm(s("bankroll.resetConfirm"))&&(c(f()),b(!0))},m=l.transactions.filter(t=>t.type==="deposit").reduce((t,n)=>t+n.amount,0),v=l.transactions.filter(t=>t.type==="withdraw").reduce((t,n)=>t+n.amount,0),M=l.transactions.filter(t=>t.type==="bet_win").reduce((t,n)=>t+n.amount,0),W=l.transactions.filter(t=>t.type==="bet_loss").reduce((t,n)=>t+n.amount,0),h=l.currentBankroll-m+v,O=m>0?(h/m*100).toFixed(1):0,g=l.transactions.filter(t=>t.type==="bet_win").length,S=l.transactions.filter(t=>t.type==="bet_loss").length,B=g+S,E=B>0?(g/B*100).toFixed(0):0,I=t=>new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),R=(t,n)=>`${n==="deposit"||n==="bet_win"?"+":"-"}$${t.toFixed(2)}`,z=t=>t==="deposit"?"text-blue-600 bg-blue-50":t==="withdraw"?"text-orange-600 bg-orange-50":t==="bet_win"?"text-green-600 bg-green-50":"text-red-600 bg-red-50",G=t=>t==="deposit"?"↓":t==="withdraw"?"↑":t==="bet_win"?"✓":"✗";return $?e.jsxs("div",{className:"min-h-screen bg-[#F0F2F5] flex flex-col",children:[e.jsxs("div",{className:"bg-white px-5 py-4 flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-1",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("h1",{className:"text-lg font-bold",children:s("bankroll.title")})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm shadow-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("bankroll.setYourBankroll")}),e.jsx("p",{className:"text-gray-500 text-sm",children:s("bankroll.enterStartingBankroll")})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("bankroll.startingAmount")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-lg",children:"$"}),e.jsx("input",{type:"number",value:x,onChange:t=>k(t.target.value),placeholder:"100",className:"w-full pl-10 pr-4 py-3 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500"})]})]}),e.jsx("button",{onClick:D,disabled:!x||parseFloat(x)<=0,className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl disabled:opacity-50",children:s("bankroll.startTracking")})]})})]}):e.jsxs("div",{className:"min-h-screen bg-[#F0F2F5] pb-24",children:[e.jsxs("div",{className:"bg-white px-5 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-1",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("h1",{className:"text-lg font-bold",children:s("bankroll.title")})]}),e.jsx("button",{onClick:T,className:"text-gray-400 text-sm",children:s("bankroll.reset")})]}),e.jsx("div",{className:"px-5 mt-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 text-white shadow-lg",children:[e.jsx("p",{className:"text-green-100 text-sm mb-1",children:s("bankroll.currentBankroll")}),e.jsxs("p",{className:"text-4xl font-bold mb-4",children:["$",l.currentBankroll.toFixed(2)]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:`flex-1 rounded-xl p-3 ${h>=0?"bg-white/20":"bg-red-500/30"}`,children:[e.jsx("p",{className:"text-xs text-green-100",children:s("bankroll.pl")}),e.jsxs("p",{className:"text-lg font-bold",children:[h>=0?"+":"",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex-1 bg-white/20 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-green-100",children:s("bankroll.roi")}),e.jsxs("p",{className:"text-lg font-bold",children:[O,"%"]})]}),e.jsxs("div",{className:"flex-1 bg-white/20 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-green-100",children:s("bankroll.winRate")}),e.jsxs("p",{className:"text-lg font-bold",children:[E,"%"]})]})]})]})}),e.jsxs("div",{className:"px-5 mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-green-500",children:"↓"}),e.jsx("span",{className:"text-xs text-gray-500",children:s("bankroll.deposits")})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-orange-500",children:"↑"}),e.jsx("span",{className:"text-xs text-gray-500",children:s("bankroll.withdrawals")})]}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",v.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-green-500",children:"✓"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s("bankroll.betsWon")," (",g,")"]})]}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["+$",M.toFixed(2)]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-red-500",children:"✗"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s("bankroll.betsLost")," (",S,")"]})]}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-$",W.toFixed(2)]})]})]}),e.jsxs("div",{className:"px-5 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:s("bankroll.recentTransactions")}),e.jsxs("span",{className:"text-xs text-gray-400",children:[l.transactions.length," total"]})]}),l.transactions.length===0?e.jsx("div",{className:"bg-white rounded-xl p-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:s("bankroll.noTransactions")})}):e.jsx("div",{className:"bg-white rounded-xl divide-y divide-gray-100",children:l.transactions.slice(0,10).map(t=>e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${z(t.type)}`,children:G(t.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.note}),e.jsx("p",{className:"text-xs text-gray-400",children:I(t.date)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-bold ${t.type==="deposit"||t.type==="bet_win"?"text-green-600":"text-red-600"}`,children:R(t.amount,t.type)}),e.jsx("button",{onClick:()=>A(t.id),className:"text-gray-300 hover:text-red-500 p-1",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]},t.id))})]}),e.jsx("div",{className:"fixed bottom-24 right-5",children:e.jsx("button",{onClick:()=>u(!0),className:"w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full shadow-lg shadow-green-500/30 flex items-center justify-center text-white",children:e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl p-6",children:[e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-center mb-4",children:s("bankroll.addTransaction")}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{type:"deposit",label:s("bankroll.deposit"),icon:"↓",color:"blue"},{type:"withdraw",label:s("bankroll.withdraw"),icon:"↑",color:"orange"},{type:"bet_win",label:s("bankroll.win"),icon:"✓",color:"green"},{type:"bet_loss",label:s("bankroll.loss"),icon:"✗",color:"red"}].map(t=>e.jsxs("button",{onClick:()=>L(t.type),className:`py-3 rounded-xl text-center transition-all ${i===t.type?`bg-${t.color}-100 border-2 border-${t.color}-500 text-${t.color}-700`:"bg-gray-100 text-gray-600"}`,children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("p",{className:"text-xs mt-1",children:t.label})]},t.type))}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("bankroll.amount")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),e.jsx("input",{type:"number",value:d,onChange:t=>j(t.target.value),placeholder:"0.00",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("bankroll.noteOptional")}),e.jsx("input",{type:"text",value:N,onChange:t=>w(t.target.value),placeholder:y(i),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 bg-gray-100 text-gray-700 font-semibold rounded-xl",children:s("bankroll.cancel")}),e.jsx("button",{onClick:_,disabled:!d||parseFloat(d)<=0,className:"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl disabled:opacity-50",children:s("bankroll.add")})]})]})})]})}export{Q as default};
