import{u as A,a as f,r as i,j as e,f as B,F as T}from"./index-BHJ97n9P.js";import{g as y,a as N,r as W,b as E,c as $,d as z}from"./favouritesStore-BExPb-7R.js";const k=[{id:39,name:"Premier League",country:"England",logo:"https://media.api-sports.io/football/leagues/39.png"},{id:140,name:"La Liga",country:"Spain",logo:"https://media.api-sports.io/football/leagues/140.png"},{id:78,name:"Bundesliga",country:"Germany",logo:"https://media.api-sports.io/football/leagues/78.png"},{id:135,name:"Serie A",country:"Italy",logo:"https://media.api-sports.io/football/leagues/135.png"},{id:61,name:"Ligue 1",country:"France",logo:"https://media.api-sports.io/football/leagues/61.png"},{id:2,name:"Champions League",country:"Europe",logo:"https://media.api-sports.io/football/leagues/2.png"}];function G(){const r=A(),{t:o}=f(),[a,u]=i.useState("teams"),[d,h]=i.useState([]),[c,g]=i.useState([]),[l,n]=i.useState(!1),[t,x]=i.useState(""),[L,p]=i.useState([]),[C,j]=i.useState(!1);i.useEffect(()=>{v()},[]);const v=()=>{h(y()),g(N())},F=s=>{W(s),h(y())},S=s=>{E(s),g(N())},M=async s=>{if(x(s),s.length<2){p([]);return}j(!0);try{if(a==="teams"){const m=await B.searchTeams(s);p(m.slice(0,10))}else{const m=k.filter(b=>b.name.toLowerCase().includes(s.toLowerCase())||b.country.toLowerCase().includes(s.toLowerCase()));p(m)}}catch(m){console.error("Search failed:",m)}finally{j(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#F0F2F5]",children:[e.jsxs("div",{className:"bg-white px-5 pt-4 pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>r(-1),className:"w-10 h-10 flex items-center justify-center -ml-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("h1",{className:"text-lg font-bold",children:o("favourites.title")})]}),e.jsx("div",{className:"flex border-b border-gray-100",children:["teams","leagues"].map(s=>e.jsxs("button",{onClick:()=>u(s),className:`flex-1 py-3 text-sm font-medium relative ${a===s?"text-primary-600":"text-gray-400"}`,children:[o(`favourites.tabs.${s}`),(s==="teams"?d.length:c.length)>0&&e.jsx("span",{className:"ml-1 text-xs bg-gray-200 px-1.5 py-0.5 rounded-full",children:s==="teams"?d.length:c.length}),a===s&&e.jsx("div",{className:"absolute bottom-0 left-1/4 right-1/4 h-0.5 bg-primary-600 rounded-full"})]},s))})]}),e.jsxs("div",{className:"px-5 pt-4",children:[a==="teams"&&e.jsx(e.Fragment,{children:d.length===0?e.jsx(w,{type:"teams",onAdd:()=>n(!0)}):e.jsxs("div",{className:"space-y-2",children:[d.map(s=>e.jsxs("div",{className:"bg-white rounded-xl p-4 flex items-center gap-4 border border-gray-100",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-12 h-12 object-contain"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:o("favourites.addedDate",{date:new Date(s.addedAt).toLocaleDateString()})})]}),e.jsx("button",{onClick:()=>F(s.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})})]},s.id)),e.jsxs("button",{onClick:()=>n(!0),className:"w-full py-4 border-2 border-dashed border-gray-200 rounded-xl text-gray-500 flex items-center justify-center gap-2 hover:border-primary-300 hover:text-primary-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),o("favourites.addTeam")]})]})}),a==="leagues"&&e.jsx(e.Fragment,{children:c.length===0?e.jsx(w,{type:"leagues",onAdd:()=>n(!0)}):e.jsxs("div",{className:"space-y-2",children:[c.map(s=>e.jsxs("div",{onClick:()=>r(`/league/${s.code||s.id}`),className:"bg-white rounded-xl p-4 flex items-center gap-4 border border-gray-100 cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-10 h-10 object-contain"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.country})]}),e.jsx("button",{onClick:m=>{m.stopPropagation(),S(s.id)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})})]},s.id)),e.jsxs("button",{onClick:()=>n(!0),className:"w-full py-4 border-2 border-dashed border-gray-200 rounded-xl text-gray-500 flex items-center justify-center gap-2 hover:border-primary-300 hover:text-primary-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),o("favourites.addLeague")]})]})})]}),l&&e.jsx(D,{type:a,searchQuery:t,searchResults:L,searching:C,onSearch:M,onClose:()=>{n(!1),x(""),p([])},onAdded:v,existingIds:a==="teams"?d.map(s=>s.id):c.map(s=>s.id)})]})}function w({type:r,onAdd:o}){const{t:a}=f();return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-200 mb-4",fill:"none",stroke:"currentColor",strokeWidth:"1",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:a(`favourites.noFavourite.${r}`)}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:a(`favourites.addForAccess.${r}`)}),e.jsxs("button",{onClick:o,className:"btn-outline max-w-[200px] flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),a(r==="teams"?"favourites.addTeam":"favourites.addLeague")]})]})}function D({type:r,searchQuery:o,searchResults:a,searching:u,onSearch:d,onClose:h,onAdded:c,existingIds:g}){const{t:l}=f(),n=t=>{r==="teams"?$(t):z(t),c()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center",onClick:h,children:e.jsxs("div",{className:"bg-white w-full sm:max-w-md rounded-t-3xl sm:rounded-3xl p-6 shadow-xl max-h-[80vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l(r==="teams"?"favourites.addTeam":"favourites.addLeague")}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),e.jsx("input",{type:"text",value:o,onChange:t=>d(t.target.value),placeholder:l(`favourites.search.${r}`),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[u&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx(T,{size:"sm",text:l("favourites.searching")})}),!u&&a.length===0&&o.length>=2&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:l(`favourites.notFound.${r}`)}),!u&&a.length===0&&o.length<2&&r==="leagues"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:l("favourites.popularLeagues")}),k.filter(t=>!g.includes(t.id)).map(t=>e.jsxs("button",{onClick:()=>n(t),className:"w-full flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors",children:[e.jsx("img",{src:t.logo,alt:"",className:"w-8 h-8 object-contain"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.country})]}),e.jsx("svg",{className:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})]},t.id))]}),!u&&a.map(t=>{const x=g.includes(t.id);return e.jsxs("button",{onClick:()=>!x&&n(t),disabled:x,className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors ${x?"bg-green-50 cursor-default":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("img",{src:t.logo,alt:"",className:"w-10 h-10 object-contain"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),t.country&&e.jsx("p",{className:"text-xs text-gray-500",children:t.country})]}),x?e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"w-5 h-5 text-primary-500",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})]},t.id)})]})]})})}export{G as default};
