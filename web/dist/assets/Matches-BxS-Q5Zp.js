import{r as c,u as X,a as P,b as Y,c as Z,f as I,j as e}from"./index-BalcLfRT.js";import{g as ee,a as te}from"./favouritesStore-BExPb-7R.js";const se=[39,140,78,135,61,2,3,848,88,94],$={popular:[{id:39,code:"PL",name:"Premier League",country:"England",logo:"https://media.api-sports.io/football/leagues/39.png"},{id:140,code:"PD",name:"La Liga",country:"Spain",logo:"https://media.api-sports.io/football/leagues/140.png"},{id:78,code:"BL1",name:"Bundesliga",country:"Germany",logo:"https://media.api-sports.io/football/leagues/78.png"},{id:135,code:"SA",name:"Serie A",country:"Italy",logo:"https://media.api-sports.io/football/leagues/135.png"},{id:61,code:"FL1",name:"Ligue 1",country:"France",logo:"https://media.api-sports.io/football/leagues/61.png"}],euro:[{id:2,code:"CL",name:"Champions League",country:"Europe",logo:"https://media.api-sports.io/football/leagues/2.png"},{id:3,code:"EL",name:"Europa League",country:"Europe",logo:"https://media.api-sports.io/football/leagues/3.png"},{id:848,code:"ECL",name:"Conference League",country:"Europe",logo:"https://media.api-sports.io/football/leagues/848.png"}],other:[{id:88,code:"ERE",name:"Eredivisie",country:"Netherlands",logo:"https://media.api-sports.io/football/leagues/88.png"},{id:94,code:"PPL",name:"Primeira Liga",country:"Portugal",logo:"https://media.api-sports.io/football/leagues/94.png"},{id:203,code:"TUR",name:"SÃ¼per Lig",country:"Turkey",logo:"https://media.api-sports.io/football/leagues/203.png"},{id:307,code:"SAU",name:"Saudi Pro League",country:"Saudi Arabia",logo:"https://media.api-sports.io/football/leagues/307.png"},{id:253,code:"MLS",name:"MLS",country:"USA",logo:"https://media.api-sports.io/football/leagues/253.png"}]};function ce(){const[a,i]=c.useState("today"),[s,h]=c.useState([]),[n,r]=c.useState([]),[o,b]=c.useState(!0),[y,L]=c.useState(!0),[j,m]=c.useState(!1),[x,d]=c.useState(!1),[T,D]=c.useState([]),[U,H]=c.useState([]),u=X(),{t:l}=P(),C=c.useRef(null),{advertiser:R,trackClick:le}=Y(),{user:oe}=Z();c.useEffect(()=>{const t=ee(),S=te();D(t.map(p=>p.id)),H(S.map(p=>p.id))},[]),c.useEffect(()=>(a==="today"&&q(),a==="live"&&J(),()=>{C.current&&clearInterval(C.current)}),[a]);const q=async()=>{b(!0);try{const t=await I.getTodayFixtures();h(t||[])}catch(t){console.error(t)}finally{b(!1)}},J=async()=>{L(!0);try{const t=await I.getLiveFixtures();r(t||[])}catch(t){console.error(t)}finally{L(!1)}C.current&&clearInterval(C.current),C.current=setInterval(async()=>{try{const t=await I.getLiveFixtures();r(t||[])}catch{}},6e4)},K=t=>se.includes(t),Q=t=>{var w,F,f,N,k;const S=(F=(w=t.teams)==null?void 0:w.home)==null?void 0:F.id,p=(N=(f=t.teams)==null?void 0:f.away)==null?void 0:N.id,E=(k=t.league)==null?void 0:k.id;return T.includes(S)||T.includes(p)||U.includes(E)},W=(t,S=!1)=>{let p=t;S&&(p=t.filter(Q));const E=[],w=[];p.forEach(f=>{K(f.league.id)?E.push(f):w.push(f)});const F=f=>f.reduce((N,k)=>{const M=k.league.id;return N[M]||(N[M]={league:k.league,fixtures:[]}),N[M].fixtures.push(k),N},{});return{popular:F(E),other:F(w),popularCount:E.length,otherCount:w.length,totalFiltered:p.length}},v=W(s,x),g=W(n,x),_=T.length>0||U.length>0,V=[{key:"today",label:l("matches.today"),count:s.length},{key:"live",label:l("matches.live"),count:n.length,isLive:!0},{key:"leagues",label:l("matches.leagues")}];return e.jsxs("div",{className:"pb-4",children:[e.jsxs("div",{className:"bg-white px-5 pt-6 pb-0 sticky top-0 z-10",children:[e.jsx("h1",{className:"text-xl font-bold text-center mb-4",children:l("matches.title")}),e.jsx("div",{className:"flex border-b border-gray-100",children:V.map(t=>e.jsxs("button",{onClick:()=>i(t.key),className:`flex-1 py-3 text-sm font-medium relative flex items-center justify-center gap-1.5 ${a===t.key?"text-primary-600":"text-gray-400"}`,children:[t.label,t.count>0&&e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center ${t.isLive?"bg-red-500 text-white":"bg-gray-200 text-gray-600"}`,children:t.count}),a===t.key&&e.jsx("div",{className:"absolute bottom-0 left-1/4 right-1/4 h-0.5 bg-primary-600 rounded-full"})]},t.key))})]}),e.jsxs("div",{className:"px-5 pt-4",children:[e.jsxs("div",{onClick:()=>u("/promo?banner=matches_partner_banner"),className:"flex items-center gap-3 bg-slate-800 rounded-xl p-3 mb-4 cursor-pointer",children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ¯"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-white text-xs font-medium",children:l("matches.bonusAt",{bonus:R.bonusAmount,name:R.name})})}),e.jsxs("span",{className:"text-slate-400 text-xs",children:[l("matches.getIt")," â†’"]})]}),a==="today"&&e.jsx(e.Fragment,{children:o?e.jsx(G,{}):s.length===0?e.jsx(O,{title:l("matches.noMatchesToday"),subtitle:l("matches.checkBackLater")}):e.jsxs(e.Fragment,{children:[e.jsx(z,{showAll:j,setShowAll:m,popularCount:v.popularCount,otherCount:v.otherCount,showFavouritesOnly:x,setShowFavouritesOnly:d,hasFavourites:_,navigate:u}),x&&v.totalFiltered===0&&e.jsxs("div",{className:"text-center py-8 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsx("svg",{className:"w-12 h-12 text-amber-300 mx-auto mb-2",fill:"none",stroke:"currentColor",strokeWidth:"1",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),e.jsx("p",{className:"text-amber-700 font-medium",children:l("matches.noFavouritesToday")}),e.jsx("button",{onClick:()=>d(!1),className:"text-amber-600 text-sm underline mt-2",children:l("matches.showAllMatches")})]}),Object.keys(v.popular).length>0&&e.jsx(A,{leagues:v.popular,navigate:u,isLive:!1,isPopular:!0}),j&&Object.keys(v.other).length>0&&e.jsx(A,{leagues:v.other,navigate:u,isLive:!1,isPopular:!1,collapsed:!0})]})}),a==="live"&&e.jsx(e.Fragment,{children:y?e.jsx(G,{}):n.length===0?e.jsx(O,{title:l("matches.noLiveMatches"),subtitle:l("matches.noMatchesNow")}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-400 mb-4",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l("matches.updatesEvery60")]}),e.jsx(z,{showAll:j,setShowAll:m,popularCount:g.popularCount,otherCount:g.otherCount,showFavouritesOnly:x,setShowFavouritesOnly:d,hasFavourites:_,navigate:u}),x&&g.totalFiltered===0&&e.jsxs("div",{className:"text-center py-8 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsx("svg",{className:"w-12 h-12 text-amber-300 mx-auto mb-2",fill:"none",stroke:"currentColor",strokeWidth:"1",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),e.jsx("p",{className:"text-amber-700 font-medium",children:l("matches.noFavouritesLive")}),e.jsx("button",{onClick:()=>d(!1),className:"text-amber-600 text-sm underline mt-2",children:l("matches.showAllLive")})]}),Object.keys(g.popular).length>0&&e.jsx(A,{leagues:g.popular,navigate:u,isLive:!0,isPopular:!0}),j&&Object.keys(g.other).length>0&&e.jsx(A,{leagues:g.other,navigate:u,isLive:!0,isPopular:!1,collapsed:!0}),Object.keys(g.popular).length===0&&!j&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:l("matches.noTopLeagueMatches")}),e.jsxs("button",{onClick:()=>m(!0),className:"text-primary-600 text-sm font-medium",children:[l("matches.showAllCount",{count:g.otherCount})," â†’"]})]})]})}),a==="leagues"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["â­ ",l("matches.top5Leagues")]}),e.jsx("div",{className:"space-y-2",children:$.popular.map(t=>e.jsx(B,{league:t,navigate:u},t.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["ðŸ† ",l("matches.europeanCups")]}),e.jsx("div",{className:"space-y-2",children:$.euro.map(t=>e.jsx(B,{league:t,navigate:u},t.id))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:["ðŸŒ ",l("matches.otherPopular")]}),e.jsx("div",{className:"space-y-2",children:$.other.map(t=>e.jsx(B,{league:t,navigate:u},t.id))})]})]})]})]})}function z({showAll:a,setShowAll:i,popularCount:s,otherCount:h,showFavouritesOnly:n,setShowFavouritesOnly:r,hasFavourites:o,navigate:b}){const{t:y}=P();return e.jsxs("div",{className:"flex items-center gap-2 mb-4 flex-wrap",children:[o&&e.jsxs("button",{onClick:()=>r(!n),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1 ${n?"bg-amber-500 text-white":"bg-amber-50 text-amber-600 border border-amber-200 hover:bg-amber-100"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),y("matches.favourites")]}),!o&&e.jsxs("button",{onClick:()=>b("/favourites"),className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-gray-50 text-gray-500 border border-gray-200 hover:bg-gray-100 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),y("matches.addFavourites")]}),e.jsxs("button",{onClick:()=>{i(!1),r(!1)},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${!a&&!n?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[y("matches.topLeagues")," (",s,")"]}),e.jsxs("button",{onClick:()=>{i(!0),r(!1)},className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${a&&!n?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[y("matches.all")," (",s+h,")"]})]})}function A({title:a,leagues:i,navigate:s,isLive:h,collapsed:n,isPopular:r}){const{t:o}=P(),[b,y]=c.useState(!n),L=Object.values(i);if(L.length===0)return null;const j=L.reduce((m,x)=>m+x.fixtures.length,0);return e.jsxs("div",{className:`mb-6 rounded-2xl overflow-hidden ${r?"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200":"bg-gray-50 border border-gray-200"}`,children:[e.jsxs("button",{onClick:()=>y(!b),className:`flex items-center justify-between w-full px-4 py-3 ${r?"bg-gradient-to-r from-amber-100 to-orange-100":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:r?"â­":"ðŸŒ"}),e.jsx("h3",{className:`font-bold ${r?"text-amber-800":"text-gray-700"}`,children:o(r?"matches.topLeagues":"matches.otherLeagues")}),e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${r?"bg-amber-200 text-amber-700":"bg-gray-200 text-gray-600"}`,children:[j," ",o("matches.matchesCount")]})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${r?"text-amber-600":"text-gray-500"} ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),b&&e.jsx("div",{className:"p-4 space-y-4",children:L.map(({league:m,fixtures:x})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-200/50",children:[e.jsx("img",{src:m.logo,alt:"",className:"w-5 h-5 object-contain"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:m.name}),e.jsx("span",{className:"text-[10px] text-gray-400 ml-auto",children:m.country})]}),e.jsx("div",{className:"rounded-xl overflow-hidden",children:x.map(d=>h?e.jsx(re,{fixture:d,onClick:()=>s(`/live/${d.fixture.id}`)},d.fixture.id):e.jsx(ae,{fixture:d,onClick:()=>s(`/match/${d.fixture.id}`)},d.fixture.id))})]},m.id))})]})}function ae({fixture:a,onClick:i}){const s=a,n=new Date(s.fixture.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),r=s.fixture.status.short;return e.jsx("div",{className:"bg-white cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",onClick:i,children:e.jsxs("div",{className:"flex items-center py-3 px-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-1.5",children:[e.jsx("img",{src:s.teams.home.logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0",onError:o=>{o.target.style.display="none"}}),e.jsx("span",{className:"text-sm text-gray-900 truncate",children:s.teams.home.name})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("img",{src:s.teams.away.logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0",onError:o=>{o.target.style.display="none"}}),e.jsx("span",{className:"text-sm text-gray-900 truncate",children:s.teams.away.name})]})]}),e.jsx("div",{className:"flex-shrink-0 text-right ml-3",children:r==="NS"?e.jsx("span",{className:"text-sm text-gray-500",children:n}):r==="FT"?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.goals.home}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.goals.away}),e.jsx("span",{className:"text-[10px] text-gray-400 mt-0.5",children:"FT"})]}):e.jsx("span",{className:"text-xs text-gray-500",children:r})})]})})}function re({fixture:a,onClick:i}){const s=a,h=s.fixture.status.elapsed,n=s.fixture.status.short,r=n==="HT"?"HT":h?`${h}'`:n;return e.jsx("div",{className:"bg-white cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 border-l-2 border-l-red-500",onClick:i,children:e.jsxs("div",{className:"flex items-center py-3 px-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-1.5",children:[e.jsx("img",{src:s.teams.home.logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0",onError:o=>{o.target.style.display="none"}}),e.jsx("span",{className:"text-sm text-gray-900 truncate",children:s.teams.home.name})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("img",{src:s.teams.away.logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0",onError:o=>{o.target.style.display="none"}}),e.jsx("span",{className:"text-sm text-gray-900 truncate",children:s.teams.away.name})]})]}),e.jsxs("div",{className:"flex flex-col items-end mr-3",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.goals.home??0}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.goals.away??0})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded flex items-center justify-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),r]})})]})})}function B({league:a,navigate:i}){return e.jsxs("div",{onClick:()=>i(`/league/${a.code}`),className:"bg-white rounded-xl p-4 flex items-center gap-4 cursor-pointer hover:shadow-md transition-shadow border border-gray-100",children:[e.jsx("img",{src:a.logo,alt:a.name,className:"w-8 h-8 object-contain",onError:s=>{s.target.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.country})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})}function G(){return e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(a=>e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:e.jsx("div",{className:"shimmer h-12 w-full rounded-lg"})},a))})}function O({title:a,subtitle:i}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsxs("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:a}),e.jsx("p",{className:"text-gray-500 text-sm",children:i})]})}export{ce as default};
